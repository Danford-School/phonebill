<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PhoneCall.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">CS410J Phone Bill Project</a> &gt; <a href="index.source.html" class="el_package">edu.pdx.cs410J.danford</a> &gt; <span class="el_source">PhoneCall.java</span></div><h1>PhoneCall.java</h1><pre class="source lang-java linenums">package edu.pdx.cs410J.danford;

import edu.pdx.cs410J.AbstractPhoneCall;

import java.text.DateFormat;
import java.text.ParseException;
import java.util.Date;
import java.text.SimpleDateFormat;
import java.util.Locale;

/**
 * This is the PhoneCall class. It extends the abstract version.
 * It has many members.
 */
public class PhoneCall extends AbstractPhoneCall {

  //These are the members that hold all of the pertinent information about the phone call.
  //I should probably make them private. Or if protected is a thing in Java
  String theCustomer;
  String theCustomersNumber;
  String isCallingThisNumber;
  String thisIsTheStartDate;
  String thisIsTheStartTime;
  String startTimeAMPM;
  String thisIsTheEndDate;
  String thisIsTheEndTime;
  String endTimeAMPM;
  String startTimeAndDate;
  String endTimeAndDate;
 // Date formattedStart;
 // Date formattedEnd;

  /**
   * This is the phone call constructor for when you have all of the information. This should be the primary, probably.
   * All fields except the name go through a check.
   * @param Customer The customer's name
   * @param caller The customer's phone number
   * @param callee The number the customer is calling
   * @param startDate The date of when the phone call begins
   * @param startTime The time of when the phone call begins
   * @param startTimeAMPM this is the AM/PM associated with the startTime
   * @param endDate The date of when the phone call ends
   * @param endTime The time of when the phone call ends
   * @param endTimeAMPM The AM/PM associated with the end time
   */
<span class="fc" id="L46">  public PhoneCall(String Customer, String caller, String callee, String startDate, String startTime, String startTimeAMPM, String endDate, String endTime, String endTimeAMPM) {</span>
<span class="fc" id="L47">    this.theCustomer = Customer;</span>
<span class="fc" id="L48">    this.theCustomersNumber = phoneNumberCheck(caller);</span>
<span class="fc" id="L49">    this.isCallingThisNumber = phoneNumberCheck(callee);</span>
<span class="fc" id="L50">    this.thisIsTheStartDate = dateChecker(startDate);</span>
<span class="fc" id="L51">    this.thisIsTheStartTime = timeChecker(startTime);</span>
<span class="fc" id="L52">    this.startTimeAMPM = checkAMPM(startTimeAMPM);</span>
<span class="fc" id="L53">    this.thisIsTheEndDate = dateChecker(endDate);</span>
<span class="fc" id="L54">    this.thisIsTheEndTime = timeChecker(endTime);</span>
<span class="fc" id="L55">    this.endTimeAMPM = checkAMPM(endTimeAMPM);</span>
<span class="fc" id="L56">    this.startTimeAndDate = fakeDateString(this.thisIsTheStartDate, this.thisIsTheStartTime, this.startTimeAMPM);</span>
<span class="fc" id="L57">    this.endTimeAndDate = fakeDateString(this.thisIsTheEndDate, this.thisIsTheEndTime, this.endTimeAMPM);</span>
<span class="fc" id="L58">  }</span>

  /**
   * This is the empty phone call constructor. It initializes all of the fields to null
   */
<span class="fc" id="L63">  public PhoneCall() {</span>
<span class="fc" id="L64">    this.theCustomer = null;</span>
<span class="fc" id="L65">    this.theCustomersNumber = null;</span>
<span class="fc" id="L66">    this.isCallingThisNumber = null;</span>
<span class="fc" id="L67">    this.thisIsTheStartDate = null;</span>
<span class="fc" id="L68">    this.thisIsTheStartTime = null;</span>
<span class="fc" id="L69">    this.startTimeAMPM = null;</span>
<span class="fc" id="L70">    this.thisIsTheEndDate = null;</span>
<span class="fc" id="L71">    this.thisIsTheEndTime = null;</span>
<span class="fc" id="L72">    this.endTimeAMPM = null;</span>
<span class="fc" id="L73">    this.startTimeAndDate = null;</span>
<span class="fc" id="L74">    this.endTimeAndDate = null;</span>
 //   this.formattedStart = null;
 //   this.formattedEnd = null;
<span class="fc" id="L77">  }</span>

  /**
   * This returns the number of the customer that is calling
   * @return This is the phone number of the customer
   */
  @Override
  public String getCaller() {
<span class="fc" id="L85">    return this.theCustomersNumber;</span>
  }

  /**
   * This returns the number that the customer is calling.
   * @return The is the number the customer is calling
   */
  @Override
  public String getCallee() {
<span class="fc" id="L94">    return this.isCallingThisNumber;</span>
  }

  /**
   * This returns the start time, date and am/pm of the phone call.
   * @return Returns &quot;startDate, startTime am/pm
   */
  @Override
  public String getStartTimeString() {
<span class="fc" id="L103">    return fakeDateString(this.thisIsTheStartDate, this.thisIsTheStartTime, this.startTimeAMPM);</span>
  }

  /**
   * This returns the end date, time am/pm.
   * @return Returns startDate, startTime am/pm
   */
  @Override
  public String getEndTimeString() {
<span class="fc" id="L112">    return fakeDateString(this.thisIsTheEndDate, this.thisIsTheEndTime, this.endTimeAMPM);</span>
  }
/*  ******* This is broken and I don't have time to fix it. I will fix it for the next iteration of the program. *****
  /**
   * This takes the seperate strings of (start or end) date and time and the date parameter of the object and creates
   * the date object and populates it, then returns a string in the correct format.
   * @param date this is the start or end date of a phonecall
   * @param time this is the start of end time of a phonecall
   * @return this is the formatted string of the date and time.
   */
  /*
  public String formatAndStringStart(String date, String time, String AMPM, PhoneCall call) {
    Locale locale = Locale.US;
    DateFormat formatter = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT, locale);
    Date formattedDate;
    String formattedFinalString = &quot;&quot;;
    try {
      formattedDate = formatter.parse(date + time + AMPM);
      call.formattedStart = formattedDate;
      formattedFinalString = formatter.format(call.formattedStart);
//      formattedFinalString.concat(&quot; &quot; + AMPM);
      call.startTimeAndDate = formattedFinalString;
      return formattedFinalString;
    } catch (ParseException e) {
      System.err.println(&quot;Failed to create a Date object.&quot;);
    }
    return null;
  }

  public String formatAndStringEnd(String date, String time, String AMPM, PhoneCall call) {
    Locale locale = Locale.US;
    DateFormat formatter = DateFormat.getDateTimeInstance(DateFormat.SHORT, DateFormat.SHORT, locale);
    Date formattedDate;
    String formattedFinalString = &quot;&quot;;
    try {
      formattedDate = formatter.parse(date + time + AMPM);
      call.formattedEnd = formattedDate;
      formattedFinalString = formatter.format(call.formattedEnd);
//      formattedFinalString.concat(&quot; &quot; + AMPM);
      call.endTimeAndDate = formattedFinalString;
      return formattedFinalString;
    } catch (ParseException e) {
      System.err.println(&quot;Failed to create a Date object.&quot;);
    }
    return null;
  }
   */

  /**
   * I had some issues with making a Date object, so this is my temporary work-around. Sorry, I'll fix it for the next
   * iteration of the program. This does have the correct output.
   * @param date Date of call in question
   * @param time Time of call in question
   * @param AMPM am/pm of the time of the call in question
   * @return a string with all of the above as a string.
   */
  public String fakeDateString(String date, String time, String AMPM) {
<span class="fc" id="L169">    return date.concat(&quot;, &quot;).concat(time).concat(&quot; &quot;).concat(AMPM);</span>
  }

  /**
   * This checks to ensure the phone number is in the correct format using regex.
   * It returns the phone number or an IllegalArgumentException
   * @param aPhoneNumber A string of the phone number that is being tested
   * @return This returns the phone number on success.
   */
  public static String phoneNumberCheck(String aPhoneNumber) {
<span class="fc bfc" id="L179" title="All 2 branches covered.">    if (!aPhoneNumber.matches(&quot;\\d{3}-\\d{3}-\\d{4}&quot;)) {</span>
<span class="fc" id="L180">      System.out.println(&quot;\nThe phone number is not in the correct format.\nPlease use ###-###-####\n&quot;);</span>
<span class="fc" id="L181">      throw new IllegalArgumentException();</span>
    }
<span class="fc" id="L183">    return aPhoneNumber;</span>
  }

  /**
   * This checks to ensure the date is in the correct format using regex.
   * It returns the number if it is acceptable, or an IllegalArgumentException
   * @param date A string of the date being checked
   * @return Returns the phone number if it passes
   */
  public static String dateChecker(String date) {
<span class="fc bfc" id="L193" title="All 2 branches covered.">    if(!date.matches(&quot;^[0-3]?[0-9]/[0-3]?[0-9]/(?:[0-9]{2})?[0-9]{2}$&quot;)) {</span>
<span class="fc" id="L194">      System.out.println(&quot;\nThe date is not valid.\nPlease use the form mm/dd/yyyy, m/dd/yyyy, mm/d/yyyy, or m/d/yyyy\n&quot;);</span>
<span class="fc" id="L195">      throw new IllegalArgumentException();</span>
    }
<span class="fc" id="L197">    return date;</span>
  }

  /**
   * This checks to ensure the time is in the correct format using regex
   * It returns the date or an IllegalArgumentException()
   * @param time A string of the time that is being checked
   * @return Returns the time if it passes the test.
   */
  public static String timeChecker(String time) {
<span class="fc bfc" id="L207" title="All 2 branches covered.">    if (!time.matches(&quot;(1[012]|[1-9]):[0-5][0-9]&quot;)) {</span>
<span class="fc" id="L208">      System.out.println(&quot;\nThe time is not valid.\nPlease use the form hh:mm or h:mm\n&quot;);</span>
<span class="fc" id="L209">      throw new IllegalArgumentException();</span>
    }
<span class="fc" id="L211">    return time;</span>
  }

  /**
   * this takes a PhoneCall and turns it into compact data for a data file.
   * @return The data-fied PhoneCall string
   */
  public String phoneCallToDataFile() {
<span class="fc" id="L219">    return this.theCustomer + &quot;,&quot; + this.theCustomersNumber + &quot;,&quot; + this.isCallingThisNumber + &quot;,&quot; +</span>
            this.thisIsTheStartDate + &quot;,&quot; + this.thisIsTheStartTime + &quot;,&quot; + this.startTimeAMPM + &quot;,&quot; +
            this.thisIsTheEndDate + &quot;,&quot; + this.thisIsTheEndTime + &quot;,&quot; + this.endTimeAMPM;
  }

  /**
   * This takes a PhoneCall and makes it readable. This is for Project 3 and I just made it because I was here.
   * @return This is the readable string from PhoneCall.
   */
  public String phoneCallToOutput() {
<span class="fc" id="L229">    return this.theCustomer + &quot; at &quot; + this.theCustomersNumber + &quot; is calling &quot; + this.isCallingThisNumber +</span>
            &quot; starting on &quot; + this.thisIsTheStartDate + &quot; at &quot; + this.thisIsTheStartTime + &quot; &quot; + this.startTimeAMPM +
            &quot;, and ending on &quot; + this.thisIsTheEndDate + &quot; at &quot; + this.thisIsTheEndTime + &quot; &quot; + this.endTimeAMPM + &quot;.&quot;;
  }

  /**
   * This just checks to ensure that AM or PM has been selected.
   * @param AMPM The AM or PM field of a call
   * @return Returns the string if it is correct
   */
  public static String checkAMPM(String AMPM) {
<span class="fc bfc" id="L240" title="All 2 branches covered.">    if(AMPM.contains(&quot;AM&quot;) | AMPM.contains(&quot;am&quot;) | AMPM.contains(&quot;PM&quot;) | AMPM.contains(&quot;pm&quot;)) {</span>
<span class="fc" id="L241">      return AMPM.toLowerCase();</span>
    } else {
<span class="fc" id="L243">      System.err.println(&quot;AM or PM required (Case insensitive)&quot;);</span>
<span class="fc" id="L244">      throw new IllegalArgumentException();</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>